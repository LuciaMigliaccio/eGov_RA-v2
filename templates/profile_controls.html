{% extends 'base.html' %}

{% load get_item from template_filters %}
{% block content %}

    <h1>Selection of controls:</h1>
    <p style="font-family: 'Times New Roman';font-size: medium">
        Select the subcategory within the controls you have implemented for each one of them
    </p>
    <form method="POST" name = "formname" action="{% url 'save_profile_controls' profile %}">
        {% csrf_token %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
     <table class="table">
        <thead>
            <tr>
                <th>Subcategory </th>
                <th>Control</th>
                <th>Remove</th>
            </tr>
        </thead>

        <tbody id="tb">
        <tr>
            <td>
                <ul class = sub>
                    <select name="sublist" class="form-control" style="width: 150px !important; min-width: 150px; max-width: 150px;" required>
                         <option value="" selected disabled hidden>Choose here</option>
                        {% for value in subname_list %}
                        <option>{{ value}}</option>
                        {% endfor %}
                    </select>
                </ul>
            </td>
            <td>
                <ul class = control>
                    <select name="controls" class="form-control" style="width: 150px !important; min-width: 150px; max-width: 150px;" required>
                         <option value="" selected disabled hidden>Choose here</option>
                        {% for value in controls_list %}
                        <option>{{ value}}</option>
                        {% endfor %}
                    </select>
                 </ul>
            </td>
            <td>
                <input type="button" class="btn btn-primary btn-sm" id= "remove" value="Remove row"  />
            </td>

        </tr>
        </tbody>
     </table>
     <input type="button" value="Add Row" class="btn btn-primary btn-sm" id="add" />

     <button type="submit" class="btn btn-primary btn-sm">Save controls</button>
     </form>



    <script src="jquery.min.js"></script>
    <script>
        $(document).ready(function() {
        $("#add").click(function() {
            var row= $('.table tbody>tr:last').clone(true).insertAfter('.table tbody>tr:last');
          return false;
            });


        $("#remove").click(function(){
            var rowCount = $('#tb tr').length;
            if(rowCount >1)
            {
                $(this).closest('tr').remove();
            }
            else{
                alert("you can't remove all the rows")
            }
        });

        });

    </script>


{% endblock %}